<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>Admin Panel - Brother Fashion House</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
<script src="firebase.js"></script>

<style>
body{font-family:Arial;background:#f4f4f4;margin:0}
.login,.panel{max-width:400px;margin:40px auto;background:#fff;padding:20px;border-radius:8px}
input,button{width:100%;padding:10px;margin:6px 0}
button{background:#111;color:#fff;border:none}
.product{border-bottom:1px solid #ddd;padding:8px}
small{color:green}
</style>
</head>

<body>

<div class="login" id="loginBox">
<h3>Admin Login</h3>
<input type="password" id="pass" placeholder="Password">
<button onclick="login()">Login</button>
</div>

<div class="panel" id="panelBox" style="display:none">
<h3>Admin Panel</h3>

<input id="name" placeholder="Product Name">
<input id="price" placeholder="Price">
<input id="size" placeholder="Size">
<input id="image" placeholder="Image URL">
<button onclick="addProduct()">Add Product</button>

<h4>Products</h4>
<div id="products"></div>

<p><b>Total Sale:</b> ৳<span id="totalSale">0</span></p>
</div>

<script>
const PASSWORD = "Brother@2026";

function login(){
  if(document.getElementById("pass").value === PASSWORD){
    loginBox.style.display="none";
    panelBox.style.display="block";
    loadProducts();
  } else {
    alert("Wrong Password");
  }
}

function addProduct(){
  db.collection("products").add({
    name:name.value,
    price:price.value,
    size:size.value,
    image:image.value,
    sold:false
  });
}

function loadProducts(){
  db.collection("products").onSnapshot(snap=>{
    products.innerHTML="";
    let total=0;
    snap.forEach(doc=>{
      let p=doc.data();
      if(p.sold) total+=Number(p.price);
      products.innerHTML+=`
      <div class="product">
        ${p.name} - ৳${p.price}
        ${p.sold?'<small> SOLD</small>':''}<br>
        <button onclick="markSold('${doc.id}',${p.price})">Sold</button>
        <button onclick="del('${doc.id}')">Delete</button>
      </div>`;
    });
    totalSale.innerText=total;
  });
}

function del(id){
  db.collection("products").doc(id).delete();
}
function markSold(id){
  db.collection("products").doc(id).update({sold:true});
}
</script>

</body>
</html>
