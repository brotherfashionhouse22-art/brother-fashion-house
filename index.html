<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brother Fashion House</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary: #2563eb; --dark: #1f2937; --light: #f3f4f6; --danger: #ef4444; --success: #10b981; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: sans-serif; }
        body { background: var(--light); padding-bottom: 70px; }
        header { background: linear-gradient(135deg, var(--dark), var(--primary)); color: white; padding: 20px 15px; text-align: center; position: sticky; top: 0; z-index: 1000; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .brand-name { font-size: 2rem; font-weight: bold; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        .marquee-container { background: #f59e0b; color: black; padding: 8px 0; overflow: hidden; white-space: nowrap; font-weight: bold; }
        .marquee-text { display: inline-block; padding-left: 100%; animation: scroll 15s linear infinite; }
        @keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }
        .page { display: none; padding: 10px; animation: fadeIn 0.3s; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .product-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .product-card { background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.1); position: relative; }
        .product-img { width: 100%; height: 150px; object-fit: cover; background: #eee; }
        .product-info { padding: 10px; }
        .product-title { font-size: 0.9rem; font-weight: bold; margin-bottom: 5px; height: 35px; overflow: hidden; }
        .price-box { display: flex; gap: 5px; align-items: center; font-size: 0.9rem; margin-bottom: 8px; }
        .new-price { color: var(--primary); font-weight: bold; }
        .old-price { color: #999; text-decoration: line-through; font-size: 0.8rem; }
        .discount-badge { position: absolute; top: 5px; left: 5px; background: var(--danger); color: white; padding: 2px 6px; border-radius: 10px; font-size: 0.7rem; }
        .order-btn { width: 100%; padding: 8px; background: var(--success); color: white; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; }
        .sold-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.7); display: flex; justify-content: center; align-items: center; z-index: 5; }
        .sold-badge { background: var(--danger); color: white; padding: 5px 10px; transform: rotate(-15deg); font-weight: bold; border: 2px solid white; }
        .bottom-nav { position: fixed; bottom: 0; width: 100%; background: white; display: flex; justify-content: space-around; padding: 10px; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); z-index: 1000; }
        .nav-item { text-align: center; color: var(--dark); text-decoration: none; font-size: 0.8rem; }
        .nav-item.active { color: var(--primary); }
        .nav-item i { font-size: 1.2rem; display: block; margin-bottom: 2px; }
        .profile-card { background: white; padding: 20px; text-align: center; border-radius: 10px; margin-bottom: 20px; }
        .btn-primary { background: var(--primary); color:white; padding:10px; border-radius:5px; text-decoration:none; display:inline-block; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; align-items: center; justify-content: center; }
        .modal-content { background: white; padding: 20px; width: 90%; max-width: 400px; border-radius: 10px; }
        .form-control { width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 5px; }
    </style>
</head>
<body>
    <header>
        <div class="brand-name">‡¶¨‡ßç‡¶∞‡¶æ‡¶¶‡¶æ‡¶∞ ‡¶´‡ßç‡¶Ø‡¶æ‡¶∂‡¶® ‡¶π‡¶æ‡¶â‡¶∏</div>
        <div style="font-size: 1rem; opacity: 0.9; margin-top: 5px;">Brothers House</div>
    </header>

    <div class="marquee-container">
        <div class="marquee-text" id="promoText">‡¶≤‡ßã‡¶°‡¶ø‡¶Ç...</div>
    </div>

    <div id="homePage" class="page active">
        <div class="product-grid" id="productContainer">
            <p style="text-align:center; width:200%; padding:20px;">‡¶™‡¶£‡ßç‡¶Ø ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
        </div>
    </div>

    <div id="profilePage" class="page">
        <div class="profile-card">
            <h2 style="color: var(--primary); font-size: 1.5rem;">‡¶¨‡ßç‡¶∞‡¶æ‡¶¶‡¶æ‡¶∞‡ßç‡¶∏ ‡¶π‡¶æ‡¶â‡¶∏</h2>
            <p style="color:#555; margin-top:5px;">‡¶™‡ßç‡¶∞‡ßã‡¶É ‡¶Æ‡ßã‡¶É ‡¶ú‡¶∏‡¶ø‡¶Æ ‡¶â‡¶¶‡ßç‡¶¶‡¶ø‡¶® ‡¶Æ‡ßÉ‡¶ß‡¶æ</p>
            <p style="margin:10px 0;"><i class="fas fa-phone"></i> 01304388032</p>
            <p style="margin-bottom:15px; color:#666;">‡¶Æ‡¶æ‡¶®‡ßç‡¶®‡¶æ‡¶® ‡¶∏‡ßÅ‡¶™‡¶æ‡¶∞ ‡¶Æ‡¶æ‡¶∞‡ßç‡¶ï‡ßá‡¶ü, ‡¶∞‡¶æ‡ßü‡ßá‡¶®‡ßç‡¶¶‡¶æ ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞, ‡¶∂‡¶∞‡¶£‡¶ñ‡ßã‡¶≤‡¶æ, ‡¶¨‡¶æ‡¶ó‡ßá‡¶∞‡¶π‡¶æ‡¶ü‡•§</p>
            <a href="https://share.google/kFHYfb7eN2QsrpfQ4" target="_blank" class="btn-primary">
                <i class="fas fa-map-marker-alt"></i> ‡¶≤‡¶æ‡¶á‡¶≠ ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®
            </a>
            <div style="margin-top:20px; font-size:0.8rem; color:#aaa;">
                <a href="admin.html" style="text-decoration:none; color:#aaa;">Admin Login</a>
            </div>
        </div>
    </div>

    <div id="orderModal" class="modal">
        <div class="modal-content">
            <h3>‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶´‡¶∞‡ßç‡¶Æ</h3>
            <p id="modalPName" style="color:var(--primary); font-weight:bold; margin-bottom:10px;"></p>
            <input type="text" id="cName" class="form-control" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ">
            <input type="tel" id="cMobile" class="form-control" placeholder="‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞">
            <input type="text" id="cAddress" class="form-control" placeholder="‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ">
            <input type="text" id="cSize" class="form-control" placeholder="‡¶∏‡¶æ‡¶á‡¶ú (L, XL, M...)">
            <select id="cPayment" class="form-control">
                <option>Cash On Delivery</option>
                <option>Bkash Payment</option>
            </select>
            <button onclick="confirmOrder()" class="order-btn" style="background:#25D366;">WhatsApp Order <i class="fab fa-whatsapp"></i></button>
            <button onclick="closeModal()" class="order-btn" style="background:#ddd; color:black; margin-top:5px;">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</button>
        </div>
    </div>

    <nav class="bottom-nav">
        <a href="#" class="nav-item active" onclick="switchPage('homePage', this)"><i class="fas fa-home"></i> ‡¶π‡ßã‡¶Æ</a>
        <a href="#" class="nav-item" onclick="switchPage('profilePage', this)"><i class="fas fa-user"></i> ‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤</a>
    </nav>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, onValue, update, increment } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ Firebase ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞‡ßá‡¶∂‡¶® ‡¶¨‡¶∏‡¶æ‡¶®‡ßã ‡¶π‡ßü‡ßá‡¶õ‡ßá
        const firebaseConfig = {
            apiKey: "AIzaSyD56PSyp7nVXKXphbSwgAJL6kUb33yb2iQ",
            authDomain: "brother-fashion-house.firebaseapp.com",
            databaseURL: "https://brother-fashion-house-default-rtdb.firebaseio.com",
            projectId: "brother-fashion-house",
            storageBucket: "brother-fashion-house.appspot.com",
            messagingSenderId: "30910144708",
            appId: "1:30910144708:web:7352698277af2c8aae6991",
            measurementId: "G-TE8CRXPBL4"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // Load Products Live
        const productRef = ref(db, 'products');
        onValue(productRef, (snapshot) => {
            const data = snapshot.val();
            const container = document.getElementById('productContainer');
            container.innerHTML = '';
            
            if(data) {
                const productList = Object.entries(data).map(([key, val]) => ({id: key, ...val})).reverse();
                
                productList.forEach(p => {
                    let discount = Math.round(((p.oldPrice - p.price) / p.oldPrice) * 100);
                    let soldBadge = p.sold ? `<div class="sold-overlay"><div class="sold-badge">SOLD OUT</div></div>` : '';
                    let btn = p.sold ? `<button class="order-btn" style="background:#ccc" disabled>‡¶∏‡ßç‡¶ü‡¶ï‡ßá ‡¶®‡ßá‡¶á</button>` : 
                                       `<button onclick="window.openOrder('${p.id}', '${p.name}', '${p.price}')" class="order-btn">‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</button>`;
                    
                    container.innerHTML += `
                        <div class="product-card">
                            ${soldBadge}
                            <div class="discount-badge">-${discount}%</div>
                            <img src="${p.img}" class="product-img" alt="${p.name}">
                            <div class="product-info">
                                <div class="product-title">${p.name}</div>
                                <div class="price-box"><span class="new-price">‡ß≥${p.price}</span> <span class="old-price">‡ß≥${p.oldPrice}</span></div>
                                ${btn}
                            </div>
                        </div>`;
                });
            } else {
                container.innerHTML = '<p style="text-align:center; width:200%;">‡¶ï‡ßã‡¶® ‡¶™‡¶£‡ßç‡¶Ø ‡¶®‡ßá‡¶á</p>';
            }
        });

        // Load Promo Text
        onValue(ref(db, 'promo'), (snapshot) => {
            if(snapshot.val()) document.getElementById('promoText').innerText = snapshot.val();
        });

        // Visitor Counter
        if (!sessionStorage.getItem('visited')) {
            update(ref(db, 'stats'), { visitors: increment(1) });
            sessionStorage.setItem('visited', 'true');
        }

        // Global functions
        window.selectedProduct = {};
        window.openOrder = (id, name, price) => {
            window.selectedProduct = {id, name, price};
            document.getElementById('modalPName').innerText = name + " - ‡ß≥" + price;
            document.getElementById('orderModal').style.display = 'flex';
        }
        
        window.confirmOrder = () => {
            let name = document.getElementById('cName').value;
            let mobile = document.getElementById('cMobile').value;
            let address = document.getElementById('cAddress').value;
            let size = document.getElementById('cSize').value;
            let pay = document.getElementById('cPayment').value;
            
            if (!name || !mobile || !address) { alert("‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶®!"); return; }

            update(ref(db, 'stats'), { sales: increment(1) });

            let msg = `*‡¶®‡¶§‡ßÅ‡¶® ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞!*%0A----------------%0Aüì¶ *‡¶™‡¶£‡ßç‡¶Ø:* ${window.selectedProduct.name}%0Aüí∞ *‡¶¶‡¶æ‡¶Æ:* ‡ß≥${window.selectedProduct.price}%0Aüìè *‡¶∏‡¶æ‡¶á‡¶ú:* ${size}%0Aüí≥ *‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü:* ${pay}%0A----------------%0Aüë§ *‡¶®‡¶æ‡¶Æ:* ${name}%0Aüìû *‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤:* ${mobile}%0Aüè† *‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ:* ${address}`;
            window.location.href = `https://wa.me/8801304388032?text=${msg}`;
            document.getElementById('orderModal').style.display = 'none';
        }
    </script>

    <script>
        function switchPage(pageId, btn) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            btn.classList.add('active');
        }
        function closeModal() { document.getElementById('orderModal').style.display = 'none'; }
    </script>
</body>
</html>
